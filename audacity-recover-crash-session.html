<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
        <title>Recover audio files in Audacity</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <!-- Bootstrap core CSS -->
        <link rel="stylesheet" href="/css/bootstrap.min.css" />
        <!-- Custom styles for this template -->
        <link rel="stylesheet" href="/css/blog.css" />
        <link rel="stylesheet" href="/css/font-awesome-4.2.0/css/font-awesome.min.css" />
        <!-- disqus mechanism -->
        <script language="javascript" src="/js/disqus.js"></script>
        <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
        <script language="javascript" src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script language="javascript" src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
        <![endif]-->
    </head>
    <body>
        <div id="nav" style="margin-bottom:10px">
                <div class="blog-masthead">
      <div class="container">
        <nav class="blog-nav">
            <a class="blog-nav-item active" href="/index.html"><i class="fa fa-home"> Home</i></a>
            <a class="blog-nav-item" href="/archives.html"><i class="fa fa-archive"> Archives</i></a>
            <a class="blog-nav-item" href="/about-me.html"><i class="fa fa-linux"> About me</i></a>
            <a class="blog-nav-item" href="/cv/curriculum-app.html"><i class="fa fa-folder"> cv</i></a>
            <a class="blog-nav-item" href="/rss.xml"><i class="fa fa-rss-square"></i></a>
        </nav>
      </div>
    </div>

        </div>

        <div class="container">
            <div class="row">
                <div class="col-md-8 blog-main">
                    <div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">How to recover audio files from a crashed session in Audacity</h2>
<div class="outline-text-2" id="text-1">
<p>
Today I experienced a crash using Audacity while I was recording a long radio session.  I was on an old macbook which runs on MacOS 10.5.8 and Audacity 1.2.5.  When I had the crash a 'Yes' or 'No' dialog opened in which I click 'No' in order <b>not to delete</b> the temporary files.
</p>

<p>
In MacOS the temporary files where in <code>/tmp/audacity&lt;audacity version&gt;-&lt;my username&gt;</code>.  In this folder there were <code>*.au</code> files enumerated, and I copied them in a folder in my home directory.  In Audacity's wiki I downloaded the  <a href="http://manual.audacityteam.org/man/recovering_crashes_manually.html#1.2_Audacity_Recovery_Utility">Audacity Recovery Utility</a> for my Intel Mac.  Then I run the application of this utility and I selected the folder with the recovered files.  The utility did the recovery, though I noticed that the recovered WAV file was a bit stretched.
</p>

<p>
My recording was a stereo recording and in the first place I was disappointed because in <a href="http://manual.audacityteam.org/man/recovery.html">Audacity's wiki</a> (see 'Manual Recovery') it says: "Stereo or edited audio is unlikely to be recovered in the correct sequence".  To be honest I haven't listened the recovered recording because it's about 15 minutes, though more or less it seems to be OK.
</p>

<p>
Each <code>au</code> file is a 1MB audio file and about 6 seconds of recording.  So if you have a short recording you can do the recovery manually if you import the audio files to audacity.  In Audacity 2.1.2 to import the audio files you go to <code>File&gt;Import&gt;Audio</code>, in Audacity 1.2.5 on MacOS that was on <code>Project&gt;Import Audio</code>.
</p>

<p>
If you have many files the Recovery Utility is the way to go.  In order to make the recovery properly the <code>*.au</code> files must have <b>consecutive enumeration</b>.  I did not experience this case, but if you don't have consecutive enumeration in your list of files the following script reads the ordered, but not properly enumerated list of files, and enumerates them properly.
</p>

<p>
I made a list of files with no consecutive enumeration in the folder <code>tmp-audacity/</code> and I stored the bash script as well.  I also made a folder to store the properly enumerated files under the name <code>ordered/</code>.
</p>


<div class="org-src-container">

<pre class="src src-sh"><span class="org-builtin">cd</span> tmp-audacity &amp;&amp; ls
</pre>
</div>


<pre class="example">
b00001.au
b00005.au
b00007.au
b00012.au
b00015.au
b00045.au
b00245.au
b00334.au
b00434.au
b00634.au
b00637.au
enumerate_files.sh
ordered
</pre>


<div class="org-src-container">

<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">!bin/</span><span class="org-keyword">bash</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Audacity enumerates the temp files in the following format: b#####.au</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">The Recovery Utility has to take as input the files enumerated with _consecuti</span><span class="org-comment"><span class="org-whitespace-line">ve numbers_</span></span>
<span class="org-comment-delimiter"># </span><span class="org-comment">The script below enumerates the tmp *.au files up to 99</span>
<span class="org-variable-name">FILES</span>=./tmp-audacity/*.au <span class="org-comment-delimiter"># </span><span class="org-comment">Read all Audacity's temp files</span>
<span class="org-variable-name">COUNTER</span>=1 <span class="org-comment-delimiter"># </span><span class="org-comment">Initialize a counter</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Loop</span>
<span class="org-keyword">for</span> f<span class="org-keyword"> in</span> $<span class="org-variable-name">FILES</span>
<span class="org-keyword">do</span>
    <span class="org-keyword">if</span> [ $<span class="org-variable-name">COUNTER</span> -lt 10 ] <span class="org-comment-delimiter"># </span><span class="org-comment">less than 10 (up to 9)</span>
    <span class="org-keyword">then</span>
        <span class="org-variable-name">FN</span>=b0000
        cp $<span class="org-variable-name">f</span> ./tmp-audacity/ordered/$<span class="org-variable-name">FN</span>$<span class="org-variable-name">COUNTER</span>.au
        <span class="org-variable-name">COUNTER</span>=$(($<span class="org-variable-name">COUNTER</span> + 1))
    <span class="org-keyword">fi</span>
    <span class="org-keyword">if</span> [ $<span class="org-variable-name">COUNTER</span> -gt 9 ] <span class="org-comment-delimiter"># </span><span class="org-comment">greater than 10 (up to 99)</span>
    <span class="org-keyword">then</span>
        <span class="org-variable-name">FN</span>=b000
        cp $<span class="org-variable-name">f</span> ./tmp-audacity/ordered/$<span class="org-variable-name">FN</span>$<span class="org-variable-name">COUNTER</span>.au
        <span class="org-variable-name">COUNTER</span>=$(($<span class="org-variable-name">COUNTER</span> + 1))
    <span class="org-keyword">fi</span>
<span class="org-keyword">done</span>;
<span class="org-builtin">cd</span> ./tmp-audacity/ordered &amp;&amp; ls <span class="org-comment-delimiter"># </span><span class="org-comment">show the properly enumerated files</span>
</pre>
</div>


<pre class="example">
b00001.au
b00002.au
b00003.au
b00004.au
b00005.au
b00006.au
b00007.au
b00008.au
b00009.au
b00010.au
b00011.au
b00012.au
</pre>
</div>
</div>

                </div>
                <div class="col-md-4 blog-sidebar">
                    <div id="latest-post">
                        <h4 class="title">Latest posts</h4>

<div class="post_info" style="margin-bottom:5px;">
    <a href="/sc3-to-processing-via-osc">SuperCollider and Processing communication (part 1)</a>
    <span>(2016-10-25)</span>
    <div>
        <em> Sending OSC messages from SC3 to Processing </em>
    </div>
</div>

<div class="post_info" style="margin-bottom:5px;">
    <a href="/pacgraph">Pacgraph</a>
    <span>(2016-10-25)</span>
    <div>
        <em> Plot a map of pacman packages </em>
    </div>
</div>

<div class="post_info" style="margin-bottom:5px;">
    <a href="/locale-gen">Locale</a>
    <span>(2016-10-25)</span>
    <div>
        <em> Generating locale settings </em>
    </div>
</div>

<div class="post_info" style="margin-bottom:5px;">
    <a href="/gnuplot-orgmode">Gnuplot and Orgmode</a>
    <span>(2016-10-23)</span>
    <div>
        <em> How to plot using gnuplot within orgmode </em>
    </div>
</div>

<div class="post_info" style="margin-bottom:5px;">
    <a href="/bibtex-js">Using bibtex.js to display citations on html</a>
    <span>(2016-10-22)</span>
    <div>
        <em> Orgmode and bibtex.js to render my publications </em>
    </div>
</div>


                    </div>
                    <div class="sidebar-module">
                        <a class="twitter-timeline" data-height="600" href="https://twitter.com/aucotsi">Tweets by aucotsi</a> <script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
<!---
<a class="twitter-timeline" href="https://twitter.com/aucotsi" data-widget-id="286532684157681664">Tweets by @aucotsi</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
-->

                    </div>
                    <div class="sidebar-module">
                        <div data-theme="medium" data-width="300" data-github="gewhere" class="github-card" target="blank"></div>
<script src="http://lab.lepture.com/github-cards/widget.js"></script>

                    </div>
                </div>
            </div>
        </div>

        <div id="footer">
            <div class="row">
                <footer class="blog-footer">
    <div class="col-md-2">
        Content by <a href="/">@aucotsi</a>
        <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">
            <img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" />
        </a>
    </div>
    <div class="col-md-2">
        Written in <a href="http://orgmode.org/" title="A swiss army knife and among other things, a publication tool">org-mode</a>
    </div>
    <div class="col-md-2">
        Exported by <a href="https://github.com/ardumont/org2jekyll.git" title="An emacs mode that adds the abilities to export to jekyll with specific org headers">org2jekyll</a>
    </div>
    <div class="col-md-2">
        Powered by <a href="http://github.com/jekyll/jekyll/" title="A static, minimalist CMS">Jekyll</a>.
    </div>
    <div class="col-md-2">
        Style from <a href="http://getbootstrap.com">Bootstrap</a> by <a href="https://twitter.com/mdo">@mdo</a>.
    </div>
    <div class="col-md-2">
        <a href="#"><i class="fa fa-angle-double-up"></i></a>
    </div>
</footer>

            </div>
        </div>
        <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
        <script language="javascript" src="/js/jquery-1.11.2.min.js"></script>
        <!-- Include all compiled plugins (below), or include individual files as needed -->
        <script language="javascript" src="/js/bootstrap.min.js"></script>
        <!-- A small message for those who do not use js. -->
        <noscript>If you want to <a href="http://disqus.com/?ref_noscript">view the comments</a>, please enable JavaScript.</noscript>
    </body>
</html>
